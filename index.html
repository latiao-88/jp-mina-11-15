<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- å›¾æ ‡è®¾ç½®ä¸º 11-15 -->
    <link rel="apple-touch-icon" href="https://ui-avatars.com/api/?name=11-15&background=5856d6&color=fff&size=512&font-size=0.4&length=5">

    <title>ç¬¬11-15è¯¾ ç»¼åˆç»ƒä¹ </title>
    <style>
        :root { --primary: #5856d6; --bg: #f2f2f7; --mask-bg: #d1d1d6; }
        body { font-family: -apple-system, "Helvetica Neue", sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        /* é¡¶éƒ¨æ§åˆ¶åŒº */
        .header { background: #fff; border-bottom: 1px solid #ddd; z-index: 10; flex-shrink: 0; display: flex; flex-direction: column;}
        .title-bar { padding: 12px; text-align: center; font-weight: bold; font-size: 1.1rem; border-bottom: 1px solid #eee;}
        .filter-bar { padding: 10px; display: flex; gap: 8px; overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; align-items: center;}
        
        /* å¤é€‰æ¡†æ ·å¼ */
        .filter-label { display: flex; align-items: center; background: #eee; padding: 6px 12px; border-radius: 20px; font-size: 0.85rem; cursor: pointer; transition: 0.2s; }
        .filter-label input { margin-right: 6px; }
        .filter-label.checked { background: #e0e0ff; color: var(--primary); font-weight: bold; border: 1px solid var(--primary); }

        .container { flex: 1; padding: 15px; overflow-y: auto; display: flex; justify-content: center; align-items: flex-start; -webkit-overflow-scrolling: touch;}
        .card { background: #fff; width: 100%; max-width: 500px; border-radius: 16px; padding: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); text-align: center; margin-bottom: 40px; position: relative;}
        
        /* è¯¾ç¨‹è§’æ ‡ */
        .lesson-badge { position: absolute; top: 10px; right: 10px; background: #ff9500; color: white; font-size: 0.7rem; padding: 3px 8px; border-radius: 4px; font-weight: bold;}
        .tag { background: #e5e5ea; color: #666; padding: 4px 10px; border-radius: 6px; font-size: 0.9rem; margin-bottom: 15px; display: inline-block; font-weight: bold;}

        /* === å¸ƒå±€ === */
        .dialogue-row { display: flex; align-items: flex-start; padding: 12px 0; border-bottom: 1px solid #f0f0f0; }
        .play-col { width: 40px; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-right: 10px; padding-top: 5px; }
        .play-icon { font-size: 1.4rem; color: var(--primary); cursor: pointer; background: #eef7ff; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .play-icon:active { background: var(--primary); color: white; transform: scale(0.9); }
        .text-col { flex: 1; text-align: left; }
        
        /* è§’è‰²æ ‡ç­¾ */
        .role-tag { font-size: 0.7rem; font-weight: bold; color: white; padding: 2px 6px; border-radius: 4px; margin-right: 5px; vertical-align: middle; display: inline-block; margin-bottom: 4px;}
        .role-m { background-color: #5856d6; } 
        .role-f { background-color: #ff2d55; }
        
        /* é®æŒ¡æ¡ */
        .text-block { transition: all 0.2s; border-radius: 6px; padding: 6px 8px; cursor: pointer; display: block; margin-bottom: 6px; line-height: 1.5; border: 1px solid transparent; }
        .masked { background-color: var(--mask-bg); color: transparent !important; position: relative; border-color: transparent; user-select: none;}
        .masked::after { content: ''; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: #999; border-radius: 50%; }

        .jp-text { font-size: 1.15rem; font-weight: bold; color: #000; }
        .cn-text { font-size: 0.95rem; color: #666; }
        .playing-row { background-color: #f0f9ff; border-radius: 8px; }

        /* åº•éƒ¨æ§åˆ¶æ  */
        .controls { padding: 10px 15px; background: #fff; border-top: 1px solid #ddd; flex-shrink: 0; padding-bottom: calc(10px + env(safe-area-inset-bottom));}
        .row { display: flex; gap: 8px; margin-bottom: 8px; }
        button { border: none; padding: 12px; border-radius: 10px; font-size: 0.9rem; font-weight: bold; cursor: pointer; display: flex; justify-content: center; align-items: center; touch-action: manipulation;}
        .btn-green { background: #34c759; color: white; width: 100%; font-size: 1rem; margin-bottom: 8px; padding: 12px;}
        .btn-blue { background: #007aff; color: white; flex: 1; }
        .btn-nav { background: #eee; color: #333; flex: 1; }
        .btn-toggle { background: #fff; border: 1px solid #ccc; color: #333; flex: 1; }
        .btn-toggle.active { background: #5ac8fa; color: white; border: none; }
        #status-bar { font-size: 10px; color: #999; text-align: center; margin-top: 2px; height: 14px;}
        
        .empty-tip { color: #999; margin-top: 50px; }
    </style>
</head>
<body>

    <div class="header">
        <div class="title-bar" id="pageTitle">ç¬¬11-15è¯¾ ç»¼åˆç»ƒä¹ </div>
        <div class="filter-bar">
            <!-- è¯¾ç¨‹ç­›é€‰å™¨ -->
            <label class="filter-label checked" onclick="toggleFilter(this, 11)">
                <input type="checkbox" checked hidden> ç¬¬11è¯¾
            </label>
            <label class="filter-label checked" onclick="toggleFilter(this, 12)">
                <input type="checkbox" checked hidden> ç¬¬12è¯¾
            </label>
            <label class="filter-label checked" onclick="toggleFilter(this, 13)">
                <input type="checkbox" checked hidden> ç¬¬13è¯¾
            </label>
            <label class="filter-label checked" onclick="toggleFilter(this, 14)">
                <input type="checkbox" checked hidden> ç¬¬14è¯¾
            </label>
            <label class="filter-label checked" onclick="toggleFilter(this, 15)">
                <input type="checkbox" checked hidden> ç¬¬15è¯¾
            </label>
        </div>
    </div>

    <div class="container">
        <div id="cardArea" class="card"></div>
    </div>

    <div class="controls">
        <div id="status-bar">å‡†å¤‡å°±ç»ª</div>
        <div class="row">
            <button class="btn-toggle" id="btnJp" onclick="toggleGlobal('jp')">å…¨æ˜¾æ—¥æ–‡</button>
            <button class="btn-toggle" id="btnCn" onclick="toggleGlobal('cn')">å…¨æ˜¾ä¸­æ–‡</button>
            <button class="btn-blue" onclick="shuffleAndReset()">ğŸ”€ æ‰“ä¹±é‡æ¥</button>
        </div>
        <div class="row">
            <button class="btn-nav" onclick="changeCard(-1)">â¬…ï¸ ä¸Šä¸€æ¡</button>
            <button class="btn-nav" onclick="changeCard(1)">ä¸‹ä¸€æ¡ â¡ï¸</button>
        </div>
    </div>

    <script>
        // ===============================================
        // å…¨é‡æ•°æ®ï¼šLesson 11 - 15
        // ===============================================
        const rawData = [
            // === ç¬¬11è¯¾ (æ•°é‡è¯) ===
            { lesson: 11, category: 'ç»ƒä¹  1', lines: [{ role: 'Q', gender: 'f', jp: 'ã‚Šã‚“ã”ã‚’ã€€ã„ãã¤ã€€è²·ã„ã¾ã—ãŸã‹ã€‚', cn: 'ä¹°äº†å‡ ä¸ªè‹¹æœï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦4ã¤ã€€è²·ã„ã¾ã—ãŸã€‚', cn: 'â€¦ä¹°äº†4ä¸ªã€‚' }] },
            { lesson: 11, category: 'ç»ƒä¹  2', lines: [{ role: 'A', gender: 'f', jp: '80å††ã®ã€€åˆ‡æ‰‹ã‚’ã€€5æšã¨ã€€ã¯ãŒãã‚’ã€€2æšã€€ãã ã•ã„ã€‚', cn: 'è¯·ç»™æˆ‘5å¼ 80æ—¥å…ƒçš„é‚®ç¥¨å’Œ2å¼ æ˜ä¿¡ç‰‡ã€‚' }, { role: 'B', gender: 'm', jp: 'â€¦ã¯ã„ã€‚å…¨éƒ¨ã§ã€€500å††ã§ã™ã€‚', cn: 'â€¦å¥½çš„ã€‚ä¸€å…±500æ—¥å…ƒã€‚' }] },
            { lesson: 11, category: 'ç»ƒä¹  3', lines: [{ role: 'Q', gender: 'f', jp: 'å¯Œå£«å¤§å­¦ã«ã€€å¤–å›½äººã®ã€€å…ˆç”ŸãŒã€€ã„ã¾ã™ã‹ã€‚', cn: 'å¯Œå£«å¤§å­¦æœ‰å¤–ç±è€å¸ˆå—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ã¯ã„ã€3äººã€€ã„ã¾ã™ã€‚ã¿ã‚“ãªã€€ã‚¢ãƒ¡ãƒªã‚«äººã§ã™ã€‚', cn: 'â€¦æœ‰ï¼Œæœ‰3äººã€‚éƒ½æ˜¯ç¾å›½äººã€‚' }] },
            { lesson: 11, category: 'ç»ƒä¹  4', lines: [{ role: 'Q', gender: 'f', jp: 'å…„å¼Ÿã¯ã€€ä½•äººã§ã™ã‹ã€‚', cn: 'å…„å¼Ÿå§å¦¹æœ‰å‡ äººï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦4äººã§ã™ã€‚å§‰ãŒã€€2äººã¨ã€€å…„ãŒã€€1äººã€€ã„ã¾ã™ã€‚', cn: 'â€¦4äººã€‚æœ‰2ä¸ªå§å§å’Œ1ä¸ªå“¥å“¥ã€‚' }] },
            { lesson: 11, category: 'ç»ƒä¹  5', lines: [{ role: 'Q', gender: 'f', jp: '1é€±é–“ã«ã€€ä½•å›ã€€ãƒ†ãƒ‹ã‚¹ã‚’ã€€ã—ã¾ã™ã‹ã€‚', cn: 'ä¸€å‘¨æ‰“å‡ æ¬¡ç½‘çƒï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦2å›ãã‚‰ã„ã€€ã—ã¾ã™ã€‚', cn: 'â€¦æ‰“2æ¬¡å·¦å³ã€‚' }] },
            { lesson: 11, category: 'ç»ƒä¹  6', lines: [{ role: 'Q', gender: 'm', jp: 'ç”°ä¸­ã•ã‚“ã¯ã€€ã©ã®ãã‚‰ã„ã€€ã‚¹ãƒšã‚¤ãƒ³èªã‚’ã€€å‹‰å¼·ã—ã¾ã—ãŸã‹ã€‚', cn: 'ç”°ä¸­å…ˆç”Ÿå­¦äº†å¤šä¹…çš„è¥¿ç­ç‰™è¯­ï¼Ÿ' }, { role: 'A', gender: 'f', jp: 'â€¦3ã‹æœˆã€€å‹‰å¼·ã—ã¾ã—ãŸã€‚', cn: 'â€¦å­¦äº†3ä¸ªæœˆã€‚' }, { role: 'B', gender: 'm', jp: '3ã‹æœˆã ã‘ã§ã™ã‹ã€‚ä¸Šæ‰‹ã§ã™ã­ã€‚', cn: 'åªå­¦äº†3ä¸ªæœˆå—ï¼ŸçœŸå‰å®³å•Šã€‚' }] },
            { lesson: 11, category: 'ç»ƒä¹  7', lines: [{ role: 'Q', gender: 'f', jp: 'å¤§é˜ªã‹ã‚‰ã€€æ±äº¬ã¾ã§ã€€æ–°å¹¹ç·šã§ã€€ã©ã®ãã‚‰ã„ã€€ã‹ã‹ã‚Šã¾ã™ã‹ã€‚', cn: 'ä»å¤§é˜ªåˆ°ä¸œäº¬åæ–°å¹²çº¿è¦èŠ±å¤šä¹…ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦2æ™‚é–“åŠã€€ã‹ã‹ã‚Šã¾ã™ã€‚', cn: 'â€¦è¦èŠ±2ä¸ªåŠå°æ—¶ã€‚' }] },
            { lesson: 11, category: 'ä¼šè¯ï¼šæ‹œæ‰˜è¿™ä¸ª(å¯„ä¿¡)', lines: [{ role: 'ç®¡ç†äºº', gender: 'f', jp: 'ã„ã„ã€€å¤©æ°—ã§ã™ã­ã€‚ãŠå‡ºã‹ã‘ã§ã™ã‹ã€‚', cn: 'å¤©æ°”çœŸå¥½å•Šã€‚æ‚¨è¦å‡ºé—¨å—ï¼Ÿ' }, { role: 'ãƒ¯ãƒ³', gender: 'm', jp: 'ãˆãˆã€ã¡ã‚‡ã£ã¨ã€€éƒµä¾¿å±€ã¾ã§ã€‚', cn: 'å—¯ï¼Œå»ä¸€ä¸‹é‚®å±€ã€‚' }, { role: 'ç®¡ç†äºº', gender: 'f', jp: 'ãã†ã§ã™ã‹ã€‚è¡Œã£ã¦ã‚‰ã£ã—ã‚ƒã„ã€‚', cn: 'æ˜¯å—ã€‚æ…¢èµ°ã€‚' }, { role: 'ãƒ¯ãƒ³', gender: 'm', jp: 'è¡Œã£ã¦ã€€ãã¾ã™ã€‚', cn: 'æˆ‘èµ°äº†ã€‚' }, { role: 'ãƒ¯ãƒ³', gender: 'm', jp: 'ã“ã‚Œã€ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã¾ã§ã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚', cn: 'éº»çƒ¦æŠŠè¿™ä¸ªå¯„åˆ°æ¾³å¤§åˆ©äºšã€‚' }, { role: 'éƒµä¾¿å±€å“¡', gender: 'f', jp: 'ã¯ã„ã€‚èˆ¹ä¾¿ã§ã™ã‹ã€èˆªç©ºä¾¿ã§ã™ã‹ã€‚', cn: 'å¥½çš„ã€‚æ˜¯æµ·è¿è¿˜æ˜¯èˆªç©ºä»¶ï¼Ÿ' }, { role: 'ãƒ¯ãƒ³', gender: 'm', jp: 'èˆªç©ºä¾¿ã¯ã€€ã„ãã‚‰ã§ã™ã‹ã€‚', cn: 'èˆªç©ºä»¶å¤šå°‘é’±ï¼Ÿ' }, { role: 'éƒµä¾¿å±€å“¡', gender: 'f', jp: '7,600å††ã§ã™ã€‚', cn: '7,600æ—¥å…ƒã€‚' }, { role: 'ãƒ¯ãƒ³', gender: 'm', jp: 'èˆ¹ä¾¿ã¯ï¼Ÿ', cn: 'æµ·è¿å‘¢ï¼Ÿ' }, { role: 'éƒµä¾¿å±€å“¡', gender: 'f', jp: '3,450å††ã§ã™ã€‚', cn: '3,450æ—¥å…ƒã€‚' }, { role: 'ãƒ¯ãƒ³', gender: 'm', jp: 'ã©ã®ãã‚‰ã„ã€€ã‹ã‹ã‚Šã¾ã™ã‹ã€‚', cn: 'è¦èŠ±å¤šä¹…æ—¶é—´ï¼Ÿ' }, { role: 'éƒµä¾¿å±€å“¡', gender: 'f', jp: 'èˆªç©ºä¾¿ã§ã€€7æ—¥ã€èˆ¹ä¾¿ã§ã€€2ã‹æœˆãã‚‰ã„ã§ã™ã€‚', cn: 'èˆªç©ºä»¶7å¤©ï¼Œæµ·è¿2ä¸ªæœˆå·¦å³ã€‚' }, { role: 'ãƒ¯ãƒ³', gender: 'm', jp: 'ã˜ã‚ƒã€èˆ¹ä¾¿ã§ã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚', cn: 'é‚£éº»çƒ¦ç”¨æµ·è¿ã€‚' }] },

            // === ç¬¬12è¯¾ (å½¢å®¹è¯è¿‡å»/æ¯”è¾ƒ) ===
            { lesson: 12, category: 'ä¾‹æ–‡ 1', lines: [{ role: 'Q', gender: 'f', jp: 'äº¬éƒ½ã¯ã€€é™ã‹ã§ã—ãŸã‹ã€‚', cn: 'äº¬éƒ½å®‰é™å—ï¼Ÿ(è¿‡å»)' }, { role: 'A', gender: 'm', jp: 'â€¦ã„ã„ãˆã€é™ã‹ã˜ã‚ƒã€€ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚', cn: 'â€¦ä¸ï¼Œä¸å®‰é™ã€‚' }] },
            { lesson: 12, category: 'ä¾‹æ–‡ 2', lines: [{ role: 'Q', gender: 'f', jp: 'æ—…è¡Œã¯ã€€æ¥½ã—ã‹ã£ãŸã§ã™ã‹ã€‚', cn: 'æ—…è¡Œå¼€å¿ƒå—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ã¯ã„ã€æ¥½ã—ã‹ã£ãŸã§ã™ã€‚', cn: 'â€¦æ˜¯çš„ï¼Œå¾ˆå¼€å¿ƒã€‚' }, { role: 'Q', gender: 'f', jp: 'å¤©æ°—ã¯ã€€ã‚ˆã‹ã£ãŸã§ã™ã‹ã€‚', cn: 'å¤©æ°”å¥½å—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ã„ã„ãˆã€ã‚ã¾ã‚Šã€€ã‚ˆããªã‹ã£ãŸã§ã™ã€‚', cn: 'â€¦ä¸ï¼Œä¸å¤ªå¥½ã€‚' }] },
            { lesson: 12, category: 'ä¾‹æ–‡ 3', lines: [{ role: 'Q', gender: 'f', jp: 'ãã®ã†ã®ã€€ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã¯ã€€ã©ã†ã§ã—ãŸã‹ã€‚', cn: 'æ˜¨å¤©çš„æ´¾å¯¹æ€ä¹ˆæ ·ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ã¨ã¦ã‚‚ã€€ã«ãã‚„ã‹ã§ã—ãŸã€‚ã„ã‚ã„ã‚ãªã€€äººã«ã€€ä¼šã„ã¾ã—ãŸã€‚', cn: 'â€¦éå¸¸çƒ­é—¹ã€‚è§åˆ°äº†å„ç§å„æ ·çš„äººã€‚' }] },
            { lesson: 12, category: 'ä¾‹æ–‡ 4', lines: [{ role: 'Q', gender: 'f', jp: 'ãƒ‹ãƒ¥ãƒ¼ãƒ¨ãƒ¼ã‚¯ã¯ã€€å¤§é˜ªã‚ˆã‚Šã€€å¯’ã„ã§ã™ã‹ã€‚', cn: 'çº½çº¦æ¯”å¤§é˜ªå†·å—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ãˆãˆã€ãšã£ã¨ã€€å¯’ã„ã§ã™ã€‚', cn: 'â€¦æ˜¯çš„ï¼Œå†·å¾—å¤šã€‚' }] },
            { lesson: 12, category: 'ä¾‹æ–‡ 5', lines: [{ role: 'Q', gender: 'm', jp: 'ç©ºæ¸¯ã¾ã§ã€€ãƒã‚¹ã¨ã€€é›»è»Šã¨ã€€ã©ã¡ã‚‰ãŒã€€é€Ÿã„ã§ã™ã‹ã€‚', cn: 'åˆ°æœºåœºå·´å£«å’Œç”µè½¦å“ªä¸ªå¿«ï¼Ÿ' }, { role: 'A', gender: 'f', jp: 'â€¦é›»è»Šã®ã€€ã»ã†ãŒã€€é€Ÿã„ã§ã™ã€‚', cn: 'â€¦ç”µè½¦æ›´å¿«ã€‚' }] },
            { lesson: 12, category: 'ä¾‹æ–‡ 6', lines: [{ role: 'Q', gender: 'm', jp: 'æµ·ã¨ã€€å±±ã¨ã€€ã©ã¡ã‚‰ãŒã€€å¥½ãã§ã™ã‹ã€‚', cn: 'å¤§æµ·å’Œå±±ï¼Œå–œæ¬¢å“ªä¸€ä¸ªï¼Ÿ' }, { role: 'A', gender: 'f', jp: 'â€¦ã©ã¡ã‚‰ã‚‚ã€€å¥½ãã§ã™ã€‚', cn: 'â€¦ä¸¤ä¸ªéƒ½å–œæ¬¢ã€‚' }] },
            { lesson: 12, category: 'ä¾‹æ–‡ 7', lines: [{ role: 'Q', gender: 'm', jp: 'æ—¥æœ¬æ–™ç†ã®ã€€ä¸­ã§ã€€ä½•ãŒã€€ã„ã¡ã°ã‚“ã€€å¥½ãã§ã™ã‹ã€‚', cn: 'æ—¥æœ¬æ–™ç†ä¸­ï¼Œæœ€å–œæ¬¢ä»€ä¹ˆï¼Ÿ' }, { role: 'A', gender: 'f', jp: 'â€¦ã¦ã‚“ã·ã‚‰ãŒã€€ã„ã¡ã°ã‚“ã€€å¥½ãã§ã™ã€‚', cn: 'â€¦æœ€å–œæ¬¢å¤©å¦‡ç½—ã€‚' }] },
            { lesson: 12, category: 'ä¼šè¯ï¼šç¥—å›­ç¥­æ€ä¹ˆæ ·', lines: [{ role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ãŸã ã„ã¾ã€‚', cn: 'æˆ‘å›æ¥äº†ã€‚' }, { role: 'ç®¡ç†äºº', gender: 'f', jp: 'ãŠå¸°ã‚Šãªã•ã„ã€‚', cn: 'ä½ å›æ¥å•¦ã€‚' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ã“ã‚Œã€äº¬éƒ½ã®ã€€ãŠåœŸç”£ã§ã™ã€‚', cn: 'è¿™æ˜¯äº¬éƒ½çš„ç‰¹äº§ã€‚' }, { role: 'ç®¡ç†äºº', gender: 'f', jp: 'ã©ã†ã‚‚ã€€ã™ã¿ã¾ã›ã‚“ã€‚', cn: 'çœŸæ˜¯å¤ªæ„Ÿè°¢äº†ã€‚' }, { role: 'ç®¡ç†äºº', gender: 'f', jp: 'ç¥—åœ’ç¥­ã¯ã€€ã©ã†ã§ã—ãŸã‹ã€‚', cn: 'ç¥—å›­ç¥­æ€ä¹ˆæ ·ï¼Ÿ' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ãŠã‚‚ã—ã‚ã‹ã£ãŸã§ã™ã€‚ã¨ã¦ã‚‚ã€€ã«ãã‚„ã‹ã§ã—ãŸã€‚', cn: 'å¾ˆæœ‰è¶£ã€‚éå¸¸çƒ­é—¹ã€‚' }, { role: 'ç®¡ç†äºº', gender: 'f', jp: 'ç¥—åœ’ç¥­ã¯ã€€äº¬éƒ½ã®ã€€ç¥­ã‚Šã§ã€€ã„ã¡ã°ã‚“ã€€æœ‰åã§ã™ã‹ã‚‰ã­ã€‚', cn: 'æ¯•ç«Ÿç¥—å›­ç¥­æ˜¯äº¬éƒ½æœ€å‡ºåçš„èŠ‚æ—¥å˜›ã€‚' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ãã†ã§ã™ã‹ã€‚å†™çœŸã‚’ã€€ãŸãã•ã‚“ã€€æ’®ã‚Šã¾ã—ãŸã€‚ã“ã‚Œã§ã™ã€‚', cn: 'æ˜¯å—ã€‚æˆ‘æ‹äº†å¾ˆå¤šç…§ç‰‡ã€‚ä½ çœ‹ã€‚' }, { role: 'ç®¡ç†äºº', gender: 'f', jp: 'ã‚ã‚ã€ã™ã”ã„ã€€äººã§ã™ã­ã€‚', cn: 'å“‡ï¼ŒäººçœŸå¤šå•Šã€‚' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ãˆãˆã€‚ã¡ã‚‡ã£ã¨ã€€ç–²ã‚Œã¾ã—ãŸã€‚', cn: 'æ˜¯å•Šã€‚æœ‰ç‚¹ç´¯äº†ã€‚' }] },

            // === ç¬¬13è¯¾ (æƒ³è¦/ç›®çš„) ===
            { lesson: 13, category: 'ä¾‹æ–‡ 1', lines: [{ role: 'Q', gender: 'f', jp: 'ä»Šã€€ä½•ãŒã€€ã„ã¡ã°ã‚“ã€€æ¬²ã—ã„ã§ã™ã‹ã€‚', cn: 'ç°åœ¨æœ€æƒ³è¦ä»€ä¹ˆï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦æ–°ã—ã„ã€€ã‚±ãƒ¼ã‚¿ã‚¤ãŒã€€æ¬²ã—ã„ã§ã™ã€‚', cn: 'â€¦æƒ³è¦æ–°æ‰‹æœºã€‚' }] },
            { lesson: 13, category: 'ä¾‹æ–‡ 2', lines: [{ role: 'Q', gender: 'f', jp: 'å¤ä¼‘ã¿ã¯ã€€ã©ã“ã¸ã€€è¡ŒããŸã„ã§ã™ã‹ã€‚', cn: 'æš‘å‡æƒ³å»å“ªé‡Œï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦æ²–ç¸„ã¸ã€€è¡ŒããŸã„ã§ã™ã€‚', cn: 'â€¦æƒ³å»å†²ç»³ã€‚' }] },
            { lesson: 13, category: 'ä¾‹æ–‡ 3', lines: [{ role: 'Q', gender: 'f', jp: 'ãã‚‡ã†ã¯ã€€ç–²ã‚Œã¾ã—ãŸã‹ã‚‰ã€ä½•ã‚‚ã€€ã—ãŸããªã„ã§ã™ã€‚', cn: 'ä»Šå¤©ç´¯äº†ï¼Œä»€ä¹ˆéƒ½ä¸æƒ³åšã€‚' }, { role: 'A', gender: 'm', jp: 'â€¦ãã†ã§ã™ã­ã€‚ãã‚‡ã†ã®ã€€ä¼šè­°ã¯ã€€å¤§å¤‰ã§ã—ãŸã­ã€‚', cn: 'â€¦æ˜¯å•Šã€‚ä»Šå¤©çš„ä¼šè®®å¾ˆè¾›è‹¦å‘¢ã€‚' }] },
            { lesson: 13, category: 'ä¾‹æ–‡ 4', lines: [{ role: 'Q', gender: 'f', jp: 'é€±æœ«ã¯ã€€ä½•ã‚’ã€€ã—ã¾ã™ã‹ã€‚', cn: 'å‘¨æœ«åšä»€ä¹ˆï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦å­ã©ã‚‚ã¨ã€€ç¥æˆ¸ã¸ã€€èˆ¹ã‚’ã€€è¦‹ã«ã€€è¡Œãã¾ã™ã€‚', cn: 'â€¦å’Œå­©å­å»ç¥æˆ·çœ‹èˆ¹ã€‚' }] },
            { lesson: 13, category: 'ä¾‹æ–‡ 5', lines: [{ role: 'Q', gender: 'f', jp: 'æ—¥æœ¬ã¸ã€€ä½•ã®ã€€å‹‰å¼·ã«ã€€æ¥ã¾ã—ãŸã‹ã€‚', cn: 'æ¥æ—¥æœ¬æ˜¯ä¸ºäº†å­¦ä»€ä¹ˆï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ç¾è¡“ã®ã€€å‹‰å¼·ã«ã€€æ¥ã¾ã—ãŸã€‚', cn: 'â€¦æ˜¯æ¥å­¦ç¾æœ¯çš„ã€‚' }] },
            { lesson: 13, category: 'ä¾‹æ–‡ 6', lines: [{ role: 'Q', gender: 'f', jp: 'å†¬ä¼‘ã¿ã¯ã€€ã©ã“ã‹ã€€è¡Œãã¾ã—ãŸã‹ã€‚', cn: 'å¯’å‡å»å“ªå„¿äº†å—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ãˆãˆã€‚åŒ—æµ·é“ã¸ã€€ã‚¹ã‚­ãƒ¼ã«ã€€è¡Œãã¾ã—ãŸã€‚', cn: 'â€¦å—¯ã€‚å»åŒ—æµ·é“æ»‘é›ªäº†ã€‚' }] },
            { lesson: 13, category: 'ä¼šè¯ï¼šåˆ†å¼€ç»“è´¦', lines: [{ role: 'å±±ç”°', gender: 'm', jp: 'ã‚‚ã†ã€€12æ™‚ã§ã™ã‚ˆã€‚æ˜¼ã”ã¯ã‚“ã‚’ã€€é£Ÿã¹ã«ã€€è¡Œãã¾ã›ã‚“ã‹ã€‚', cn: 'å·²ç»12ç‚¹äº†å“¦ã€‚ä¸å»åƒåˆé¥­å—ï¼Ÿ' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ãˆãˆã€‚ã©ã“ã¸ã€€è¡Œãã¾ã™ã‹ã€‚', cn: 'å¥½å•Šã€‚å»å“ªé‡Œï¼Ÿ' }, { role: 'å±±ç”°', gender: 'm', jp: 'ãã†ã§ã™ã­ã€‚ãã‚‡ã†ã¯ã€€æ—¥æœ¬æ–™ç†ãŒã€€é£Ÿã¹ãŸã„ã§ã™ã­ã€‚', cn: 'å—¯â€¦â€¦ä»Šå¤©æƒ³åƒæ—¥æœ¬èœå‘¢ã€‚' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ã˜ã‚ƒã€ã€Œã¤ã‚‹ã‚„ã€ã¸ã€€è¡Œãã¾ã—ã‚‡ã†ã€‚', cn: 'é‚£å»â€œTsuruyaâ€å§ã€‚' }, { role: 'åº—ã®äºº', gender: 'f', jp: 'ã”æ³¨æ–‡ã¯ï¼Ÿ', cn: 'è¯·é—®ç‚¹ä»€ä¹ˆï¼Ÿ' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ã‚ãŸã—ã¯ã€€ã¦ã‚“ã·ã‚‰å®šé£Ÿã€‚', cn: 'æˆ‘è¦å¤©å¦‡ç½—å¥—é¤ã€‚' }, { role: 'å±±ç”°', gender: 'm', jp: 'ã‚ãŸã—ã¯ã€€ç‰›ã©ã‚“ã€‚', cn: 'æˆ‘è¦ç‰›è‚‰ç›–é¥­ã€‚' }, { role: 'åº—ã®äºº', gender: 'f', jp: 'ã¦ã‚“ã·ã‚‰å®šé£Ÿã¨ã€€ç‰›ã©ã‚“ã§ã™ã­ã€‚å°‘ã€…ã€€ãŠå¾…ã¡ã€€ãã ã•ã„ã€‚', cn: 'å¤©å¦‡ç½—å¥—é¤å’Œç‰›è‚‰ç›–é¥­æ˜¯å§ã€‚è¯·ç¨ç­‰ã€‚' }, { role: 'åº—ã®äºº', gender: 'f', jp: '1,680å††ã§ã€€ã”ã–ã„ã¾ã™ã€‚', cn: 'ä¸€å…±1,680æ—¥å…ƒã€‚' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ã™ã¿ã¾ã›ã‚“ã€‚åˆ¥ã€…ã«ã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚', cn: 'ä¸å¥½æ„æ€ã€‚è¯·åˆ†å¼€ç»“è´¦ã€‚' }, { role: 'åº—ã®äºº', gender: 'f', jp: 'ã¯ã„ã€‚ã¦ã‚“ã·ã‚‰å®šé£Ÿã¯ã€€980å††ã€ç‰›ã©ã‚“ã¯ã€€700å††ã§ã™ã€‚', cn: 'å¥½çš„ã€‚å¤©å¦‡ç½—å¥—é¤980æ—¥å…ƒï¼Œç‰›è‚‰ç›–é¥­700æ—¥å…ƒã€‚' }] },

            // === ç¬¬14è¯¾ (Teå½¢/è¯·æ±‚) ===
            { lesson: 14, category: 'ä¾‹æ–‡ 1', lines: [{ role: 'A', gender: 'f', jp: 'ãƒœãƒ¼ãƒ«ãƒšãƒ³ã§ã€€åå‰ã‚’ã€€æ›¸ã„ã¦ã€€ãã ã•ã„ã€‚', cn: 'è¯·ç”¨åœ†ç ç¬”å†™åå­—ã€‚' }, { role: 'B', gender: 'm', jp: 'â€¦ã¯ã„ã€ã‚ã‹ã‚Šã¾ã—ãŸã€‚', cn: 'â€¦å¥½çš„ï¼Œæ˜ç™½äº†ã€‚' }] },
            { lesson: 14, category: 'ä¾‹æ–‡ 2', lines: [{ role: 'A', gender: 'f', jp: 'ã™ã¿ã¾ã›ã‚“ãŒã€ã“ã®ã€€æ¼¢å­—ã®ã€€èª­ã¿æ–¹ã‚’ã€€æ•™ãˆã¦ã€€ãã ã•ã„ã€‚', cn: 'ä¸å¥½æ„æ€ï¼Œè¯·æ•™æˆ‘è¿™ä¸ªæ±‰å­—çš„è¯»æ³•ã€‚' }, { role: 'B', gender: 'm', jp: 'â€¦ã€Œã˜ã‚…ã†ã—ã‚‡ã€ã§ã™ã‚ˆã€‚', cn: 'â€¦è¯»ä½œâ€œJuushoâ€å“¦ã€‚' }] },
            { lesson: 14, category: 'ä¾‹æ–‡ 3', lines: [{ role: 'A', gender: 'f', jp: 'æš‘ã„ã§ã™ã­ã€‚çª“ã‚’ã€€é–‹ã‘ã¾ã—ã‚‡ã†ã‹ã€‚', cn: 'çœŸçƒ­å•Šã€‚æˆ‘æŠŠçª—æˆ·æ‰“å¼€å§ï¼Ÿ' }, { role: 'B', gender: 'm', jp: 'â€¦ã™ã¿ã¾ã›ã‚“ã€‚ãŠé¡˜ã„ã—ã¾ã™ã€‚', cn: 'â€¦ä¸å¥½æ„æ€ã€‚éº»çƒ¦ä½ äº†ã€‚' }] },
            { lesson: 14, category: 'ä¾‹æ–‡ 4', lines: [{ role: 'A', gender: 'f', jp: 'é§…ã¾ã§ã€€è¿ãˆã«ã€€è¡Œãã¾ã—ã‚‡ã†ã‹ã€‚', cn: 'æˆ‘å»è½¦ç«™æ¥ä½ å§ï¼Ÿ' }, { role: 'B', gender: 'm', jp: 'â€¦ã‚¿ã‚¯ã‚·ãƒ¼ã§ã€€è¡Œãã¾ã™ã‹ã‚‰ã€ã‘ã£ã“ã†ã§ã™ã€‚', cn: 'â€¦æˆ‘åå‡ºç§Ÿè½¦å»ï¼Œä¸ç”¨äº†ã€‚' }] },
            { lesson: 14, category: 'ä¾‹æ–‡ 5', lines: [{ role: 'Q', gender: 'f', jp: 'ä½è—¤ã•ã‚“ã¯ã€€ã©ã“ã§ã™ã‹ã€‚', cn: 'ä½è—¤å°å§åœ¨å“ªé‡Œï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ä»Šã€€ä¼šè­°å®¤ã§ã€€æ¾æœ¬ã•ã‚“ã¨ã€€è©±ã—ã¦ã€€ã„ã¾ã™ã€‚', cn: 'â€¦ç°åœ¨æ­£åœ¨ä¼šè®®å®¤å’Œæ¾æœ¬å…ˆç”Ÿ/å¥³å£«è¯´è¯ã€‚' }, { role: 'Q', gender: 'f', jp: 'ã˜ã‚ƒã€ã¾ãŸã€€ã‚ã¨ã§ã€€æ¥ã¾ã™ã€‚', cn: 'é‚£ï¼Œæˆ‘è¿‡ä¼šå„¿å†æ¥ã€‚' }] },
            { lesson: 14, category: 'ä¾‹æ–‡ 6', lines: [{ role: 'Q', gender: 'm', jp: 'é›¨ãŒã€€é™ã£ã¦ã€€ã„ã¾ã™ã‹ã€‚', cn: 'åœ¨ä¸‹é›¨å—ï¼Ÿ' }, { role: 'A', gender: 'f', jp: 'â€¦ã„ã„ãˆã€é™ã£ã¦ã€€ã„ã¾ã›ã‚“ã€‚', cn: 'â€¦ä¸ï¼Œæ²¡åœ¨ä¸‹ã€‚' }] },
            { lesson: 14, category: 'ä¼šè¯ï¼šéº»çƒ¦å»ç»¿ç”º', lines: [{ role: 'ã‚«ãƒªãƒŠ', gender: 'f', jp: 'ã¿ã©ã‚Šç”ºã¾ã§ã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚', cn: 'éº»çƒ¦å»ç»¿ç”ºã€‚' }, { role: 'é‹è»¢æ‰‹', gender: 'm', jp: 'ã¯ã„ã€‚', cn: 'å¥½çš„ã€‚' }, { role: 'ã‚«ãƒªãƒŠ', gender: 'f', jp: 'ã™ã¿ã¾ã›ã‚“ã€‚ã‚ã®ã€€ä¿¡å·ã‚’ã€€å³ã¸ã€€æ›²ãŒã£ã¦ã€€ãã ã•ã„ã€‚', cn: 'ä¸å¥½æ„æ€ã€‚è¯·åœ¨é‚£ä¸ªä¿¡å·ç¯å³è½¬ã€‚' }, { role: 'é‹è»¢æ‰‹', gender: 'm', jp: 'å³ã§ã™ã­ã€‚', cn: 'å³è½¬æ˜¯å§ã€‚' }, { role: 'ã‚«ãƒªãƒŠ', gender: 'f', jp: 'ãˆãˆã€‚', cn: 'å—¯ã€‚' }, { role: 'é‹è»¢æ‰‹', gender: 'm', jp: 'ã¾ã£ã™ãã§ã™ã‹ã€‚', cn: 'ç›´èµ°å—ï¼Ÿ' }, { role: 'ã‚«ãƒªãƒŠ', gender: 'f', jp: 'ãˆãˆã€ã¾ã£ã™ãã€€è¡Œã£ã¦ã€€ãã ã•ã„ã€‚', cn: 'å—¯ï¼Œè¯·ç›´èµ°ã€‚' }, { role: 'ã‚«ãƒªãƒŠ', gender: 'f', jp: 'ã‚ã®ã€€èŠ±å±‹ã®ã€€å‰ã§ã€€æ­¢ã‚ã¦ã€€ãã ã•ã„ã€‚', cn: 'è¯·åœ¨é‚£ä¸ªèŠ±åº—å‰é¢åœã€‚' }, { role: 'é‹è»¢æ‰‹', gender: 'm', jp: 'ã¯ã„ã€‚1,800å††ã§ã™ã€‚', cn: 'å¥½çš„ã€‚1,800æ—¥å…ƒã€‚' }, { role: 'ã‚«ãƒªãƒŠ', gender: 'f', jp: 'ã“ã‚Œã§ã€€ãŠé¡˜ã„ã—ã¾ã™ã€‚', cn: 'ç»™ä½ é’±ã€‚' }, { role: 'é‹è»¢æ‰‹', gender: 'm', jp: '3,200å††ã®ã€€ãŠé‡£ã‚Šã§ã™ã€‚ã‚ã‚ŠãŒã¨ã†ã€€ã”ã–ã„ã¾ã—ãŸã€‚', cn: 'æ‰¾æ‚¨3,200æ—¥å…ƒã€‚è°¢è°¢æƒ é¡¾ã€‚' }] },

            // === ç¬¬15è¯¾ (è®¸å¯/ç¦æ­¢/çŠ¶æ€) ===
            { lesson: 15, category: 'ä¾‹æ–‡ 1', lines: [{ role: 'Q', gender: 'f', jp: 'ã“ã®ã€€ã‚«ã‚¿ãƒ­ã‚°ã‚’ã€€ã‚‚ã‚‰ã£ã¦ã‚‚ã€€ã„ã„ã§ã™ã‹ã€‚', cn: 'è¿™ä¸ªç›®å½•å¯ä»¥æ‹¿èµ°å—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ãˆãˆã€ã„ã„ã§ã™ã‚ˆã€‚ã©ã†ãã€‚', cn: 'â€¦å—¯ï¼Œå¯ä»¥å“¦ã€‚è¯·æ‹¿å§ã€‚' }] },
            { lesson: 15, category: 'ä¾‹æ–‡ 2', lines: [{ role: 'Q', gender: 'f', jp: 'ã“ã®ã€€è¾æ›¸ã‚’ã€€å€Ÿã‚Šã¦ã‚‚ã€€ã„ã„ã§ã™ã‹ã€‚', cn: 'å¯ä»¥å€Ÿè¿™æœ¬å­—å…¸å—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ã™ã¿ã¾ã›ã‚“ã€ã¡ã‚‡ã£ã¨â€¦â€¦ã€‚ä»Šã€€ä½¿ã£ã¦ã€€ã„ã¾ã™ã€‚', cn: 'â€¦ä¸å¥½æ„æ€ï¼Œæœ‰ç‚¹â€¦â€¦ã€‚æˆ‘ç°åœ¨æ­£åœ¨ç”¨ã€‚' }] },
            { lesson: 15, category: 'ä¾‹æ–‡ 3', lines: [{ role: 'A', gender: 'm', jp: 'ã“ã“ã§ã€€éŠã‚“ã§ã¯ã€€ã„ã‘ã¾ã›ã‚“ã€‚', cn: 'ä¸å¯ä»¥åœ¨è¿™é‡Œç©ã€‚' }, { role: 'B', gender: 'f', jp: 'â€¦ã¯ã„ã€‚', cn: 'â€¦æ˜¯ã€‚' }] },
            { lesson: 15, category: 'ä¾‹æ–‡ 4', lines: [{ role: 'Q', gender: 'f', jp: 'å¸‚å½¹æ‰€ã®ã€€é›»è©±ç•ªå·ã‚’ã€€çŸ¥ã£ã¦ã€€ã„ã¾ã™ã‹ã€‚', cn: 'çŸ¥é“å¸‚æ”¿åºœçš„ç”µè¯å·ç å—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ã„ã„ãˆã€çŸ¥ã‚Šã¾ã›ã‚“ã€‚', cn: 'â€¦ä¸ï¼Œä¸çŸ¥é“ã€‚' }] },
            { lesson: 15, category: 'ä¾‹æ–‡ 5', lines: [{ role: 'Q', gender: 'f', jp: 'ãƒãƒªã‚¢ã•ã‚“ã¯ã€€ã©ã“ã«ã€€ä½ã‚“ã§ã€€ã„ã¾ã™ã‹ã€‚', cn: 'ç›åˆ©äºšä½åœ¨å“ªé‡Œï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦å¤§é˜ªã«ã€€ä½ã‚“ã§ã€€ã„ã¾ã™ã€‚', cn: 'â€¦ä½åœ¨å¤§é˜ªã€‚' }] },
            { lesson: 15, category: 'ä¾‹æ–‡ 6', lines: [{ role: 'Q', gender: 'f', jp: 'ãƒ¯ãƒ³ã•ã‚“ã¯ã€€çµå©šã—ã¦ã€€ã„ã¾ã™ã‹ã€‚', cn: 'ç‹å…ˆç”Ÿ/å¥³å£«ç»“å©šäº†å—ï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦ã„ã„ãˆã€ç‹¬èº«ã§ã™ã€‚', cn: 'â€¦ä¸ï¼Œæ˜¯å•èº«ã€‚' }] },
            { lesson: 15, category: 'ä¾‹æ–‡ 7', lines: [{ role: 'Q', gender: 'f', jp: 'ãŠä»•äº‹ã¯ã€€ä½•ã§ã™ã‹ã€‚', cn: 'å·¥ä½œæ˜¯ä»€ä¹ˆï¼Ÿ' }, { role: 'A', gender: 'm', jp: 'â€¦æ•™å¸«ã§ã™ã€‚é«˜æ ¡ã§ã€€æ•™ãˆã¦ã€€ã„ã¾ã™ã€‚', cn: 'â€¦æ˜¯æ•™å¸ˆã€‚åœ¨é«˜ä¸­æ•™ä¹¦ã€‚' }] },
            { lesson: 15, category: 'ä¼šè¯ï¼šæ‚¨çš„å®¶äººï¼Ÿ', lines: [{ role: 'æœ¨æ‘', gender: 'f', jp: 'ã„ã„ã€€æ˜ ç”»ã§ã—ãŸã­ã€‚', cn: 'çœŸæ˜¯éƒ¨å¥½ç”µå½±å•Šã€‚' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ãˆãˆã€‚ã‚ãŸã—ã¯ã€€å®¶æ—ã‚’ã€€æ€ã„å‡ºã—ã¾ã—ãŸã€‚', cn: 'æ˜¯å•Šã€‚æˆ‘æƒ³èµ·äº†æˆ‘çš„å®¶äººã€‚' }, { role: 'æœ¨æ‘', gender: 'f', jp: 'ãã†ã§ã™ã‹ã€‚ãƒŸãƒ©ãƒ¼ã•ã‚“ã®ã€€ã”å®¶æ—ã¯ï¼Ÿ', cn: 'æ˜¯å—ã€‚ç±³å‹’å…ˆç”Ÿçš„å®¶äººæ˜¯ï¼Ÿ' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ä¸¡è¦ªã¨ã€€å§‰ãŒã€€1äººã€€ã„ã¾ã™ã€‚', cn: 'çˆ¶æ¯å’Œä¸€ä¸ªå§å§ã€‚' }, { role: 'æœ¨æ‘', gender: 'f', jp: 'ã©ã¡ã‚‰ã«ã€€ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã™ã‹ã€‚', cn: 'ä»–ä»¬åœ¨å“ªé‡Œï¼Ÿ' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'ä¸¡è¦ªã¯ã€€ãƒ‹ãƒ¥ãƒ¼ãƒ¨ãƒ¼ã‚¯ã®ã€€è¿‘ãã«ã€€ä½ã‚“ã§ã€€ã„ã¾ã™ã€‚', cn: 'çˆ¶æ¯ä½åœ¨çº½çº¦é™„è¿‘ã€‚' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'å§‰ã¯ã€€ãƒ­ãƒ³ãƒ‰ãƒ³ã§ã€€åƒã„ã¦ã€€ã„ã¾ã™ã€‚', cn: 'å§å§åœ¨ä¼¦æ•¦å·¥ä½œã€‚' }, { role: 'ãƒŸãƒ©ãƒ¼', gender: 'm', jp: 'æœ¨æ‘ã•ã‚“ã®ã€€ã”å®¶æ—ã¯ï¼Ÿ', cn: 'æœ¨æ‘å°å§çš„å®¶äººå‘¢ï¼Ÿ' }, { role: 'æœ¨æ‘', gender: 'f', jp: '3äººã§ã™ã€‚çˆ¶ã¯ã€€éŠ€è¡Œå“¡ã§ã™ã€‚', cn: 'æœ‰3äººã€‚çˆ¶äº²æ˜¯é“¶è¡ŒèŒå‘˜ã€‚' }, { role: 'æœ¨æ‘', gender: 'f', jp: 'æ¯ã¯ã€€é«˜æ ¡ã§ã€€è‹±èªã‚’ã€€æ•™ãˆã¦ã€€ã„ã¾ã™ã€‚', cn: 'æ¯äº²åœ¨é«˜ä¸­æ•™è‹±è¯­ã€‚' }] },
        ];

        // ================= é€»è¾‘å˜é‡ =================
        let activeData = [];
        let currentIndex = 0;
        let globalShowJp = false;
        let globalShowCn = false;
        let isSeqPlaying = false;
        let selectedLessons = [11, 12, 13, 14, 15];
        let voices = { male: null, female: null, default: null };

        // ================= åˆå§‹åŒ–ä¸ç­›é€‰ =================
        function init() {
            filterData();
            loadVoices();
        }

        function toggleFilter(label, lessonNum) {
            const checkbox = label.querySelector('input');
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                label.classList.add('checked');
                if(!selectedLessons.includes(lessonNum)) selectedLessons.push(lessonNum);
            } else {
                label.classList.remove('checked');
                selectedLessons = selectedLessons.filter(l => l !== lessonNum);
            }
            selectedLessons.sort((a,b) => a-b);
            filterData();
        }

        function filterData(shuffle = false) {
            let temp = rawData.filter(item => selectedLessons.includes(item.lesson));
            if (shuffle) {
                for (let i = temp.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [temp[i], temp[j]] = [temp[j], temp[i]];
                }
            }
            activeData = temp;
            currentIndex = 0;
            render();
        }

        function shuffleAndReset() {
            filterData(true);
            const btn = document.querySelector('.btn-blue');
            const originalText = btn.innerText;
            btn.innerText = "âœ… å·²æ‰“ä¹±";
            setTimeout(() => btn.innerText = originalText, 1000);
        }

        // ================= è¯­éŸ³å¼•æ“ =================
        function loadVoices() {
            const all = window.speechSynthesis.getVoices();
            const ja = all.filter(v => v.lang.includes('ja'));
            if (ja.length > 0) {
                voices.female = ja.find(v => v.name.includes('Kyoko') || v.name.includes('Female')) || ja[0];
                voices.male = ja.find(v => v.name.includes('Otoya') || v.name.includes('Male')) || ja[0];
                voices.default = ja[0];
                document.getElementById('status-bar').innerText = "âœ… è¯­éŸ³åŠ è½½å®Œæˆ";
            }
        }
        if (window.speechSynthesis.onvoiceschanged !== undefined) window.speechSynthesis.onvoiceschanged = loadVoices;

        function speak(text, gender, callback) {
            window.speechSynthesis.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.lang = 'ja-JP';
            u.rate = 0.9;
            
            if (gender === 'm' && voices.male) u.voice = voices.male;
            else if (gender === 'f' && voices.female) u.voice = voices.female;
            else if (voices.default) u.voice = voices.default;

            u.pitch = (gender === 'm') ? 0.95 : 1.05;
            if (callback) u.onend = callback;
            window.speechSynthesis.speak(u);
        }

        // ================= æ¸²æŸ“é€»è¾‘ =================
        function render() {
            window.speechSynthesis.cancel();
            isSeqPlaying = false;
            
            const cardArea = document.getElementById('cardArea');
            const pageTitle = document.getElementById('pageTitle');

            if (activeData.length === 0) {
                cardArea.innerHTML = `<div class="empty-tip">è¯·è‡³å°‘é€‰æ‹©ä¸€è¯¾</div>`;
                pageTitle.innerText = "æœªé€‰æ‹©è¯¾ç¨‹";
                return;
            }
            
            const data = activeData[currentIndex];
            pageTitle.innerText = `è¿›åº¦: ${currentIndex + 1} / ${activeData.length}`;
            
            updateGlobalBtns();

            let html = `
                <div class="lesson-badge">ç¬¬${data.lesson}è¯¾</div>
                <div class="tag">${data.category}</div>
                <button class="btn-green" onclick="playSequence()">â–¶ï¸ å®Œæ•´æ’­æ”¾ (åŒ…å«åœé¡¿)</button>
                <div style="text-align:left; width:100%;">
            `;

            data.lines.forEach((line, idx) => {
                const jpClass = globalShowJp ? 'text-block jp-text' : 'text-block jp-text masked';
                const cnClass = globalShowCn ? 'text-block cn-text' : 'text-block cn-text masked';
                let roleClass = line.gender === 'm' ? 'role-m' : 'role-f';
                
                html += `
                    <div class="dialogue-row" id="row-${idx}">
                        <div class="play-col"><div class="play-icon" onclick="playLine(${idx})">ğŸ”Š</div></div>
                        <div class="text-col">
                            ${line.role ? `<span class="role-tag ${roleClass}">${line.role}</span>` : ''}
                            <div class="${jpClass}" onclick="toggleOne(this)">${line.jp}</div>
                            <div class="${cnClass}" onclick="toggleOne(this)">${line.cn}</div>
                        </div>
                    </div>
                `;
            });
            html += `</div>`;
            cardArea.innerHTML = html;
        }

        // ================= äº¤äº’é€»è¾‘ =================
        function toggleOne(el) { 
            if(el.classList.contains('masked')) el.classList.remove('masked');
            else el.classList.add('masked');
        }
        function toggleGlobal(type) { 
            if (type === 'jp') globalShowJp = !globalShowJp; 
            if (type === 'cn') globalShowCn = !globalShowCn; 
            render(); 
        }
        function updateGlobalBtns() {
            const bJ = document.getElementById('btnJp'); const bC = document.getElementById('btnCn');
            bJ.className = globalShowJp ? 'btn-toggle active' : 'btn-toggle'; bC.className = globalShowCn ? 'btn-toggle active' : 'btn-toggle';
            bJ.innerText = globalShowJp ? 'å…¨æ˜¾æ—¥æ–‡' : 'å…¨éšæ—¥æ–‡'; bC.innerText = globalShowCn ? 'å…¨æ˜¾ä¸­æ–‡' : 'å…¨éšä¸­æ–‡';
        }
        function playLine(idx) {
            isSeqPlaying = false; highlightRow(idx);
            const data = activeData[currentIndex]; const line = data.lines[idx];
            speak(line.jp, line.gender, () => { unhighlightRow(idx); });
        }
        function playSequence() {
            isSeqPlaying = true; const data = activeData[currentIndex]; let idx = 0;
            document.querySelectorAll('.dialogue-row').forEach(e => e.classList.remove('playing-row'));
            function next() {
                if (!isSeqPlaying || idx >= data.lines.length) { isSeqPlaying = false; if(idx > 0) unhighlightRow(idx-1); return; }
                if (idx > 0) unhighlightRow(idx-1); highlightRow(idx);
                document.getElementById(`row-${idx}`).scrollIntoView({behavior: "smooth", block: "center"});
                const line = data.lines[idx];
                speak(line.jp, line.gender, () => { idx++; setTimeout(next, 600); });
            }
            next();
        }
        function highlightRow(idx) { const el = document.getElementById(`row-${idx}`); if (el) el.classList.add('playing-row'); }
        function unhighlightRow(idx) { const el = document.getElementById(`row-${idx}`); if (el) el.classList.remove('playing-row'); }
        function changeCard(dir) { 
            const next = currentIndex + dir; 
            if (next >= 0 && next < activeData.length) { currentIndex = next; render(); } 
        }

        // å¯åŠ¨
        setTimeout(init, 100);
    </script>
</body>
</html>
